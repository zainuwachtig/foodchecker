<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <!-- <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>JSON laden</title>

    <style>
      html, pre {
        font-family: sans-serif;
      }

      body {
        width: 500px;
        margin: 0 auto;
        background-color: #ccc;
      }

      section {
        line-height: 1.5;
        letter-spacing: 0.05rem;
        padding: 1rem;
        background-color: white;
      }
      section > h2{
        margin:0;
      }
      section > h3{
        margin: 0;
      }
      section > img{
        width: 100%
      }

    </style>

  </head>

  <body>
    <h1>Als foodie, wil ik tijdens het boodschappen doen makkelijk informatie over een product kunnen zoeken en bekijken, zodat ik goede keuze kan maken of het bij mijn dieet past.</h1>

    <section>
    </section>

    <script>
        // Healthy Food Checker API

        /*
          Barcode Detection API   https://developer.mozilla.org/en-US/docs/Web/API/Barcode_Detection_API
          Barcode detection using Shape Detection API https://paul.kinlan.me/barcode-detection/
          The Shape Detection API: a picture is worth a thousand words, faces, and barcodes https://web.dev/shape-detection/#barcodedetector
          QR and barcode scanner using HTML and Javascript https://blog.minhazav.dev/QR-and-barcode-scanner-using-html-and-javascript/
        */

        const display = document.querySelector('section');
        //console.dir(display)
        let barcode = "05584621620045"; // <<< deze moet uit een barcode scan komen
        let url = "https://world.openfoodfacts.org/api/v0/product/"+barcode+".json";

        fetch(url).then(function(response) { 
          return response.json()
        }).then(function(json) { 
          let data = json;
          console.log(data)

          //code
          const title = document.createElement("h2");
          title.textContent = data.code;
          display.appendChild(title);

          //img
          // display.textContent += "\n"+data.webImage.url;
          const plaat = document.createElement("img");
          plaat.src = data.product.image_url;
          display.appendChild(plaat);
        });
        
    </script>
  </body>
</html>